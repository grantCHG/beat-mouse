<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>kid mouse</title>
	<link rel="stylesheet" href="animate.css">
	<style>
	#box{
		width:680px;
		height: 744px;
		padding:20px;
		background: url(image/bg.png);
		background-size: 100% auto;
		position: relative;
	}
	#wrap{
		position: absolute;
	    bottom: 20px;
	    width: 100%;
	}
	li.single{
		width:133px;
		height: 200px;
		float: left;
		list-style: none;
		margin-top: 20px;
		position: relative;
	}
	.inner{
		width:90%;
		height: 100px;
		position: absolute;
		bottom: 0;
		left:50%;
		margin-left: -66px;
		z-index: 2;
	}
	
	.man{
		background: url(image/man.png);
		background-size: 100% auto;
	}
	.man-break{
		background: url(image/man-break.png);
		background-size: 100% auto;
	}
	.boom{
		background: url(image/boom.png);
		background-size: 100% auto;
	}
	.boom-break{
		background: url(image/boom-break.png);
		background-size: 100% auto;
	}
	.hole{
		width:100%;
		position: absolute;
    	top: 73px;
    	left:0;
    	z-index: 1;
	}
	.bottom{
		width:100%;
		height: 110px;
		position: absolute;
		left:0;
		bottom: 0;
		z-index: 3;
	}
	
	.up{
		transform: translate(0,-110px);
	}
	.down{
		transform: translate(0,110px);
	}
	.animated {
		transition:transform 0.5s ease-out;
}
	</style>
</head>
<body>
	<div id="box">
	<div id="wrap">
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		<li class="single">
			<div class="inner man animated"></div>
			<img class="hole" src="image/hold.png"/>
			<img class="bottom" src="image/box-bottom.png"/>
		</li>
		</div>
	</div>
	<script type="text/javascript" src="zepto.js"></script>
	<script>
(function fn(){
	var tmp = Math.ceil(Math.random()*6);
	var boompro = Math.ceil(Math.random()*10);
	setTimeout(function(){
		if(boompro>6){//出现炸弹的概率
			$($(".inner")[tmp-1]).removeClass("man").addClass("boom");
		}else{
			$($(".inner")[tmp-1]).removeClass("boom").addClass("man");
		}
		$($(".inner")[tmp-1]).addClass("up");
	},300);//下次出现间隔
	setTimeout(function() {
		$(".inner").removeClass("up");
		fn();
	}, 1000);//出现时长 速度
})();
$(".inner").on("touchstart",function(e){
	var $target = $(e.currentTarget);
	if($target && $target.hasClass("up")){
		if($target.hasClass("boom")){
			$target.removeClass("boom").addClass("boom-break");
			$target.removeClass("up");
			setTimeout(function(){
				$target.removeClass("boom-break").addClass("man");
			},500);//下移恢复man
		}else{
			$target.removeClass("man").addClass("man-break");
			$target.removeClass("up");
			setTimeout(function(){
				$target.removeClass("man-break").addClass("man");
			},500);//下移恢复man
		}
		
	}else{
		//落空提示
	}
});
	</script>
</body>
</html>